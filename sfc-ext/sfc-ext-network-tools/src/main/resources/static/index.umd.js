(function(e,n){typeof exports=="object"&&typeof module!="undefined"?n(require("vue"),require("sfc-common")):typeof define=="function"&&define.amd?define(["vue","sfc-common"],n):(e=typeof globalThis!="undefined"?globalThis:e||self,n(e.Vue,e.SfcCommon))})(this,function(e,n){"use strict";var v=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var I=(e,n,a)=>n in e?v(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,_=(e,n)=>{for(var a in n||(n={}))ne.call(n,a)&&I(e,a,n[a]);if(x)for(var a of x(n))oe.call(n,a)&&I(e,a,n[a]);return e},k=(e,n)=>ee(e,te(n));var a;(t=>{(l=>{function r(s){return{url:"/nwt/findWolByUid",params:{uid:s}}}l.findByUid=r;function d(s){return{url:"/nwt/saveWolDevice",method:"post",headers:{"Content-Type":"application/json"},data:s}}l.saveWolDevice=d;function c(s){return{url:"/nwt/wakeWolDevice",params:{id:s}}}l.wakeWolDevice=c})(t.Wol||(t.Wol={}));function i(){return{url:"/nwt/getAllInterface"}}t.getAllInterface=i})(a||(a={}));var ae="",g=(t,i)=>{const l=t.__vccOpts||t;for(const[r,d]of i)l[r]=d;return l};const h={class:"tip"},F=e.createTextVNode(" IP\u5730\u5740: "),b={style:{"padding-left":"24px"}},L=e.createTextVNode(" \u5E7F\u64AD\u5730\u5740: "),A={style:{"padding-left":"24px"}},M=e.defineComponent({name:"NetworkInterfaceInfoCard"}),W=e.defineComponent(k(_({},M),{props:{networkInterface:{type:Object,default:()=>({})}},setup(t){return(i,l)=>{const r=e.resolveComponent("VCardContent"),d=e.resolveComponent("VCard");return e.openBlock(),e.createBlock(d,{class:"network-interface-info-card",title:t.networkInterface.name},{default:e.withCtx(()=>[e.createVNode(r,null,{default:e.withCtx(()=>[e.createElementVNode("div",h,[e.createElementVNode("div",null,"\u63A5\u53E3: "+e.toDisplayString(t.networkInterface.name),1),e.createElementVNode("div",null,"\u540D\u79F0: "+e.toDisplayString(t.networkInterface.displayName),1),e.createElementVNode("div",null,"MAC: "+e.toDisplayString(t.networkInterface.mac),1),e.createElementVNode("div",null,[F,e.createElementVNode("ul",b,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.networkInterface.ipList,c=>(e.openBlock(),e.createElementBlock("li",{key:c},e.toDisplayString(c),1))),128))])]),e.createElementVNode("div",null,[L,e.createElementVNode("ul",A,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.networkInterface.broadcastAddressList,c=>(e.openBlock(),e.createElementBlock("li",{key:c},e.toDisplayString(c),1))),128))])]),e.createElementVNode("div",null,"MTU: "+e.toDisplayString(t.networkInterface.mtu),1)])]),_:1})]),_:1},8,["title"])}}}));var D=g(W,[["__scopeId","data-v-55ec9a7c"]]);const $={style:{display:"flex","flex-wrap":"wrap"}},S=e.defineComponent({name:"NetworkInterfaceList",components:{NetworkInterfaceInfoCard:D}}),O=e.defineComponent(k(_({},S),{setup(t){const i=window.SfcUtils,l=new n.LoadingManager,r=l.getLoadingRef(),d=e.ref([]);return n.MethodInterceptor.createAsyncActionProxy({async loadData(){d.value=(await i.request(a.getAllInterface())).data.data}},!1,l).loadData(),(s,o)=>{const f=e.resolveComponent("LoadingMask");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(f,{loading:e.unref(r)},null,8,["loading"]),e.createElementVNode("div",$,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),m=>(e.openBlock(),e.createBlock(D,{key:m.name,style:{animation:"up-in .2s"},"network-interface":m},null,8,["network-interface"]))),128))])])}}}));var le="";const U={class:"d-flex justify-space-between"},R={class:"tip",style:{width:"calc(100% - 12px)","margin-left":"12px"}},T=e.defineComponent({name:"WolDeviceCard"}),j=e.defineComponent(k(_({},T),{props:{wolDevice:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["wake"],setup(t,{emit:i}){return(l,r)=>{const d=e.resolveComponent("LoadingMask"),c=e.resolveComponent("CommonIcon"),s=e.resolveComponent("VBtn"),o=e.resolveComponent("VCardContent"),f=e.resolveComponent("VCard");return e.openBlock(),e.createBlock(f,{class:"wol-device-card"},{default:e.withCtx(()=>[e.createVNode(d,{loading:t.loading,type:"circular"},null,8,["loading"]),e.createVNode(o,null,{default:e.withCtx(()=>[e.createElementVNode("div",U,[e.createElementVNode("div",null,[e.createVNode(c,{icon:"mdi-laptop",color:t.wolDevice.isOnline?"primary":"",style:{"font-size":"32px"}},null,8,["color"])]),e.createElementVNode("div",R,[e.createElementVNode("div",null,"\u8BBE\u5907\u540D: "+e.toDisplayString(t.wolDevice.name),1),e.createElementVNode("div",null,"MAC: "+e.toDisplayString(t.wolDevice.mac),1),e.createElementVNode("div",null,"IP: "+e.toDisplayString(t.wolDevice.ip),1)]),e.createElementVNode("div",null,[t.wolDevice.isOnline?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(s,{key:0,style:{"margin-top":"6px"},icon:"mdi-power",color:"primary",onClick:r[0]||(r[0]=m=>i("wake",t.wolDevice))}))])])]),_:1})]),_:1})}}}));var B=g(j,[["__scopeId","data-v-045bfd3a"]]);const P=e.defineComponent({name:"WolDeviceForm",components:{FormRow:n.Components.FormRow,FormCol:n.Components.FormCol,TextInput:n.Components.TextInput}}),q=e.defineComponent(k(_({},P),{props:{initObject:{type:Object,default:void 0},readOnly:{type:Boolean,default:!1}},emits:["submit"],setup(t,{expose:i,emit:l}){const r=t,d=window.SfcUtils,c=e.ref(),s=n.defineForm({actions:{async submit(){return await d.request(a.Wol.saveWolDevice(o))}},formData:{name:"",port:9,ip:"",mac:""},formRef:c,validators:{name:[n.Validators.notNull(),n.Validators.maxLen("\u4E0D\u80FD\u5927\u4E8E255\u4E2A\u5B57\u7B26",255)],mac:[n.Validators.isMatchRegex("^([abcdefABCDEF\\d]{2}[:\\-]?){6}$","\u4E0D\u662F\u6709\u6548\u7684mac\u5730\u5740")],ip:[n.Validators.notNull(),n.Validators.isMatchRegex("^((2((5[0-5])|([0-4]\\d)))|([0-1]?\\d{1,2}))(\\.((2((5[0-5])|([0-4]\\d)))|([0-1]?\\d{1,2}))){3}$","\u4E0D\u662F\u6709\u6548\u7684ipv4\u5730\u5740")],port:[n.Validators.minNum(1),n.Validators.maxNum(65535)]},throwError:!0}),{formData:o,actions:f,validators:m,loadingRef:N,loadingManager:w}=s,C=w.getLoadingRef();return r.initObject&&Object.assign(o,r.initObject),i(s),(E,p)=>{const X=e.resolveComponent("LoadingMask"),V=e.resolveComponent("TextInput"),y=e.resolveComponent("FormCol"),Y=e.resolveComponent("FormRow"),Z=e.resolveComponent("base-form");return e.openBlock(),e.createBlock(Z,{ref_key:"formRef",ref:c,"model-value":e.unref(o),"submit-action":e.unref(f).submit},{default:e.withCtx(()=>[e.createVNode(X,{loading:e.unref(C)},null,8,["loading"]),e.createVNode(Y,null,{default:e.withCtx(()=>[e.createVNode(y,{label:"\u8BBE\u5907\u540D\u79F0","top-label":""},{default:e.withCtx(()=>[e.createVNode(V,{modelValue:e.unref(o).name,"onUpdate:modelValue":p[0]||(p[0]=u=>e.unref(o).name=u),rules:e.unref(m).name,placeholder:"\u8D77\u4E2A\u540D\u5B57\u5427~",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(y,{label:"MAC\u5730\u5740","top-label":""},{default:e.withCtx(()=>[e.createVNode(V,{modelValue:e.unref(o).mac,"onUpdate:modelValue":p[1]||(p[1]=u=>e.unref(o).mac=u),rules:e.unref(m).mac,placeholder:"\u5F88\u91CD\u8981\uFF01\u5524\u9192\u5168\u9760\u8FD9\u4E2A\u4E86",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(y,{label:"\u7AEF\u53E3(udp)","top-label":""},{default:e.withCtx(()=>[e.createVNode(V,{modelValue:e.unref(o).port,"onUpdate:modelValue":p[2]||(p[2]=u=>e.unref(o).port=u),rules:e.unref(m).port,placeholder:"\u9ED8\u8BA4UDP\u7AEF\u53E3-9",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(y,{label:"IP\u5730\u5740(ipv4)","top-label":""},{default:e.withCtx(()=>[e.createVNode(V,{modelValue:e.unref(o).ip,"onUpdate:modelValue":p[3]||(p[3]=u=>e.unref(o).ip=u),rules:e.unref(m).ip,placeholder:"\u7528\u6765\u68C0\u6D4B\u662F\u5426\u5728\u7EBF",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1})]),_:1})]),_:1},8,["model-value","submit-action"])}}})),z={class:"WolDeviceList"},G=e.createTextVNode(" \u6DFB\u52A0\u8BBE\u5907 "),H=e.createTextVNode(" \u5237\u65B0 "),J={style:{"margin-top":"12px"}},K=e.defineComponent({name:"WolDeviceList",components:{WolDeviceCard:B,LoadingMask:n.Components.LoadingMask}}),Q=e.defineComponent(k(_({},K),{props:{uid:{type:[String,Number],default:0}},setup(t){const i=t,l=window.SfcUtils,r=new n.LoadingManager,d=r.getLoadingRef(),c=e.ref([]),s=e.reactive({}),o=n.MethodInterceptor.createAsyncActionProxy({async loadData(){c.value=(await l.request(a.Wol.findByUid(i.uid))).data.data||[]},async wake(m){await l.request(a.Wol.wakeWolDevice(m.id)),s[m.id]=!0}},!1,r),f=()=>{const m=l.openComponentDialog(q,{title:"\u6DFB\u52A0\u8BBE\u5907",props:{initObject:{uid:i.uid}},async onConfirm(){return(await m.getInstAsForm().submit()).success?(l.snackbar("\u6DFB\u52A0\u6210\u529F"),o.loadData(),!0):!1}})};return o.loadData(),(m,N)=>{const w=e.resolveComponent("VBtn"),C=e.resolveComponent("CommonIcon"),E=e.resolveComponent("LoadingMask");return e.openBlock(),e.createElementBlock("div",z,[e.createVNode(w,{color:"primary",onClick:f},{default:e.withCtx(()=>[G]),_:1}),e.createVNode(w,{style:{"margin-left":"12px"},onClick:e.unref(o).loadData},{default:e.withCtx(()=>[e.createVNode(C,{icon:"mdi-refresh"}),H]),_:1},8,["onClick"]),e.createVNode(E,{loading:e.unref(d)},null,8,["loading"]),e.createElementVNode("div",J,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),p=>(e.openBlock(),e.createBlock(B,{key:p.id,style:{animation:"up-in .2s"},"wol-device":p,loading:e.unref(s)[p.id],onWake:e.unref(o).wake},null,8,["wol-device","loading","onWake"]))),128))])])}}}));window.bootContext.addProcessor({taskName:"\u6CE8\u518C\u7F51\u7EDC\u5DE5\u5177",execute(t,i){t.component("WolDeviceList",Q),t.component("NetworkInterfaceList",O)}})});
