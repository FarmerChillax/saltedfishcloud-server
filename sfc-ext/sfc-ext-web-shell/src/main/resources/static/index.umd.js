(function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(require("vue"),require("sfc-common")):typeof define=="function"&&define.amd?define(["vue","sfc-common"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.Vue,e.SfcCommon))})(this,function(e,t){"use strict";var R=Object.defineProperty,v=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var A=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))G.call(t,r)&&A(e,r,t[r]);if(g)for(var r of g(t))J.call(t,r)&&A(e,r,t[r]);return e},h=(e,t)=>v(e,K(t));const r="/webShell";var x;(n=>{function c(d,m){return t.useJsonBody({url:`${r}/executeCommand`,method:"post",params:{nodeId:m},data:d})}n.sendSimpleCommand=c})(x||(x={}));var z="",Q="",b=(n,c)=>{const d=n.__vccOpts||n;for(const[m,f]of c)d[m]=f;return d};const E=n=>(e.pushScopeId("data-v-6fcb666a"),n=n(),e.popScopeId(),n),k={class:"d-flex align-center"},N=E(()=>e.createElementVNode("br",null,null,-1)),D=E(()=>e.createElementVNode("p",{class:"text-header text-primary"}," \u9644\u52A0\u53C2\u6570 ",-1)),I={class:"other-param"},T=e.defineComponent({name:"WsSimpleExecView",components:{FormSelect:t.Components.FormSelect,ClusterSelector:t.Components.ClusterSelector}}),U=e.defineComponent(h(V({},T),{setup(n){const c=[{title:"UTF-8",value:"utf8"},{title:"GBK",value:"gbk"}],d=e.ref(),m=window.SfcUtils,f=new t.LoadingManager,F=f.getLoadingRef(),p=e.ref(""),C=e.ref(""),l=e.reactive({charset:"utf8",cmd:"",env:{},timeout:10}),u=[];let i=0;const w=t.MethodInterceptor.createAsyncActionProxy({async send(){if(!F.value){if(l.cmd.length==0)return Promise.reject("\u547D\u4EE4\u4E0D\u80FD\u4E3A\u7A7A");try{u.unshift(l.cmd),u.length>=500&&u.pop(),p.value+=`SHELL> ${l.cmd}
`;const s=await m.request(x.sendSimpleCommand(l,C.value));p.value+=`${s.data.data.output}
\u6267\u884C\u8017\u65F6: ${s.data.data.time}ms \u7A0B\u5E8F\u9000\u51FA\u7801: ${s.data.data.exitCode}
`,await e.nextTick();const o=d.value.$el;o.scrollTop=o.scrollHeight,l.cmd=""}catch(s){return p.value+=`
\u6267\u884C\u51FA\u9519: `+s+`
`,Promise.reject(s)}}}},!1,f),W=s=>{const o=s.code=="ArrowUp",_=s.code=="ArrowDown";if(!o&&!_){i=0;return}if(!!u.length){if(_&&i--,i>=u.length||i<0){_&&(l.cmd="",i=0);return}l.cmd=u[i],o&&i++}};return(s,o)=>{const _=e.resolveComponent("LoadingMask"),L=e.resolveComponent("SimpleTextarea"),H=e.resolveComponent("TextInput"),M=e.resolveComponent("CommonIcon"),P=e.resolveComponent("ClusterSelector"),j=e.resolveComponent("FormSelect"),q=e.resolveComponent("VTextField"),O=e.resolveDirective("ripple");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(_,{loading:e.unref(F)},null,8,["loading"]),e.createVNode(L,{ref_key:"outputRef",ref:d,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=a=>p.value=a),readonly:"",class:"output"},null,8,["modelValue"]),e.createElementVNode("div",k,[e.createVNode(H,{modelValue:e.unref(l).cmd,"onUpdate:modelValue":o[1]||(o[1]=a=>e.unref(l).cmd=a),label:"\u8F93\u5165\u547D\u4EE4",placeholder:"\u8F93\u5165\u547D\u4EE4\uFF0C\u56DE\u8F66\u76F4\u63A5\u6267\u884C",style:{"margin-right":"6px"},"hide-details":"",onKeydown:W,onEnter:e.unref(w).send},null,8,["modelValue","onEnter"]),e.withDirectives(e.createVNode(M,{color:"primary",style:{padding:"12px","border-radius":"50%",cursor:"pointer"},icon:"mdi-send",flat:"",onClick:e.unref(w).send},null,8,["onClick"]),[[O]])]),N,D,e.createElementVNode("div",I,[e.createVNode(P,{modelValue:C.value,"onUpdate:modelValue":o[2]||(o[2]=a=>C.value=a),style:{"max-width":"240px"}},null,8,["modelValue"]),e.createVNode(j,{modelValue:e.unref(l).charset,"onUpdate:modelValue":o[3]||(o[3]=a=>e.unref(l).charset=a),label:"\u7A0B\u5E8F\u8F93\u51FA\u7F16\u7801",style:{"max-width":"92px"},"hide-details":"",items:c},null,8,["modelValue"]),e.createVNode(q,{modelValue:e.unref(l).timeout,"onUpdate:modelValue":o[4]||(o[4]=a=>e.unref(l).timeout=a),class:"float-label-t6",style:{"margin-bottom":"6px"},color:"primary",variant:"underlined","hide-details":"",label:"\u6267\u884C\u8D85\u65F6(s)"},null,8,["modelValue"])])])}}}));var y=b(U,[["__scopeId","data-v-6fcb666a"]]);const $=[e.createElementVNode("h1",null,"Hello World",-1)],B=e.defineComponent({name:"WsInteractiveExecView"}),S=e.defineComponent(h(V({},B),{props:{},setup(n){return(c,d)=>(e.openBlock(),e.createElementBlock("div",null,$))}}));window.bootContext.addProcessor({execute(n,c){n.component(y.name,y),n.component(S.name,S)},taskName:"\u6CE8\u518CWebShell\u7EC4\u4EF6"})});
